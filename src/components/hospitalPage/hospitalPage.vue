<template>
    <div>
        <div>
            <!-- 轮播图部分 -->
            <mt-swipe :auto="8000">
                <mt-swipe-item v-for="item in adList" >
                    <div>
                        <img class="img" :src="item.zst" @click="goArticle(item.id)">
                    </div>
                </mt-swipe-item>
            </mt-swipe>
        </div>
        <div class="flex" style="color:#7F7F7F"  >
            <div class="flex1" @click="loadIntro()">
                <div style="text-align:center;">
                    <svg viewBox="0 0 1024 1024" class="svgIcon" style="margin-top:10px;height:30px;fill:rgb(66, 138, 68);">
                        <path d="M724.243 952.816H63.018V236.484h220.408V71.183h440.816v165.301h220.409v716.332H724.242zM283.427 291.612H118.12v606.103h165.307V291.612z m165.307 606.104h110.204V787.488H448.734v110.228z m220.408-661.231V126.284H338.53v771.432h55.103V732.388h220.409v165.328h55.103V236.485z m220.408 55.127H724.243v606.103H889.55V291.612z m-55.103 165.301h-55.102v-55.101h55.102v55.101z m0 165.274h-55.102v-55.128h55.102v55.128z m0 165.301h-55.102v-55.101h55.102v55.101zM393.631 567.059H614.04v55.128H393.631v-55.128z m0-165.245H614.04v55.101H393.631v-55.101z m0-165.329H614.04v55.128H393.631v-55.128zM228.325 456.913h-55.102v-55.101h55.102v55.101z m0 165.274h-55.102v-55.128h55.102v55.128z m0 165.301h-55.102v-55.101h55.102v55.101z"></path>
                    </svg>
                </div>
                <div class="menuTitle">
                    机构介绍
                </div>
            </div>
            <div class="flex1" @click="loadNotice">
                <div style="text-align:center;">
                    <svg viewBox="0 0 1024 1024" class="svgIcon" style="margin-top:10px;height:30px;fill:rgb(195, 40, 29);">
                        <path d="M891.261836 396.756279l95.339392-95.359858c15.126512-15.126512 15.126512-39.647999 0-54.769394-8.695033-8.688893-20.482497-12.212136-31.813566-10.911514-1.401929-0.154519-2.77009-0.430812-4.220115-0.430812l-86.029352 0.016373c-9.165754-83.948971-80.43596-149.514245-166.774351-149.514245L194.294125 85.786829c-92.543719 0-167.825286 75.287707-167.825286 167.831426l0 516.381797c0 92.543719 75.28259 167.825286 167.825286 167.825286l503.46972 0c92.53144 0 167.824263-75.28259 167.824263-167.825286L865.588107 558.036499l84.97944-0.00921c1.140986 0 2.208295-0.239454 3.321652-0.335644 1.77339 0.24457 3.540639 0.509606 5.329379 0.509606 9.909697 0 19.818371-3.77907 27.382651-11.346419 15.126512-15.121396 15.126512-39.642882 0-54.764278L891.261836 396.756279 891.261836 396.756279zM751.189637 480.593709c-4.750187 0-9.246595 0.971118-13.450337 2.536776L737.739301 310.227554c4.203742 1.565658 8.700149 2.541893 13.450337 2.541893l114.537639-0.016373-56.605206 56.621579c-7.569396 7.563256-11.348466 17.47193-11.348466 27.386744 0 9.909697 3.77907 19.823488 11.348466 27.381627 0 0 0.020466 0.021489 0.030699 0.032746l56.409754 56.403614L751.189637 480.593709 751.189637 480.593709zM786.257318 235.305167l-35.06768 0.005117c-4.750187 0-9.246595 0.977257-13.450337 2.541893l0-57.131185c0-2.934842-0.39295-5.7694-1.007957-8.518001C761.767554 184.241164 780.49201 207.398584 786.257318 235.305167L786.257318 235.305167zM194.294125 163.244968l470.335065 0c-2.686179 5.270027-4.347005 11.150968-4.347005 17.477047l0 473.089805L194.294125 653.81182c-32.509415 0-63.765279 9.575076-90.367147 26.574239l0-426.76985C103.926978 203.789383 144.466276 163.244968 194.294125 163.244968L194.294125 163.244968zM788.129968 769.999029c0 49.827849-40.543392 90.367147-90.3651 90.367147L194.294125 860.366176c-43.74634 0-80.30907-31.245631-88.589664-72.586179 3.955078-3.024893 7.564279-6.579859 10.206456-11.162224 16.098653-27.975145 46.13269-45.347814 78.383208-45.347814l477.648634 0c4.129041 0 8.035-0.816598 11.766998-2.015913 4.696975 2.022053 9.861602 3.168156 15.302521 3.168156 21.394263 0 38.728046-17.346063 38.728046-38.72907L737.740324 555.51098c4.203742 1.565658 8.700149 2.541893 13.450337 2.541893l36.939307-0.005117L788.129968 769.999029 788.129968 769.999029zM788.129968 769.999029"></path>
                    </svg>
                </div>
                <div class="menuTitle">
                    就诊须知
                </div>
            </div>
            <div class="flex1"  @click="goAppointment();">
                <div style="text-align:center;">
                    <svg viewBox="0 0 1024 1024" class="svgIcon" style="margin-top:10px;height:30px;fill:#FF9800;">
                        <path d="M458.170001 822.964334H161.009044c-21.304212 0-38.610366-17.581424-38.610366-39.220256v-356.550579h723.546043V240.260016c0-52.829206-42.265616-95.768157-94.266967-95.768157h-72.704882V87.957261h-55.6566v56.535621h-333.945745V87.957261h-55.657624v56.535621h-72.704882c-52.002374 0-94.26799 42.939975-94.267991 95.768157v543.483039c0 52.824089 42.265616 95.759971 94.267991 95.75997H458.168977c15.393595 0 27.826765-12.628622 27.826766-28.266787 0.001023-15.639189-12.432147-28.272927-27.825742-28.272927zM205.886137 512h194.798615v56.542784H205.886137v-56.542784z m0 169.613002h194.798615v56.542784H205.886137v-56.542784z m556.574195-84.806501h-55.657624v141.349285H845.943698v-56.542784h-83.483366v-84.806501z m129.579217-46.820352c-42.095747-42.756803-97.92324-66.254983-157.404959-66.254983-59.486836 0-115.402333 23.496134-157.410076 66.254983-42.091654 42.753733-65.224514 99.474572-65.224514 159.898757s23.13286 117.230981 65.224514 159.90285c42.091654 42.753733 97.92324 66.254983 157.410076 66.254983 59.482743 0 115.39824-23.50125 157.404959-66.254983 42.087561-42.761919 65.219397-99.479689 65.219397-159.90285 0-60.424184-23.13286-117.229958-65.219397-159.898757zM734.633566 879.503025c-92.100628 0-166.975942-76.06235-166.975942-169.618119s74.875315-169.614026 166.975942-169.614026c92.092441 0 166.967756 76.058257 166.967756 169.614026s-74.875315 169.618119-166.967756 169.618119z" p-id="2208"></path>
                    </svg>
                </div>
                <div class="menuTitle">
                    预约挂号
                </div>
            </div>
            <div class="flex1"  >
                <div style="text-align:center;">
                    <svg viewBox="0 0 1024 1024" class="svgIcon" style="margin-top:10px;height:30px;fill:#03A9F4;">
                        <path d="M675.521 306.64V144.934c0-1.067-0.23-2.079-0.289-3.15v-7.312h-0.578c-4.104-35.692-28.498-63.236-58.266-63.236H408.183c-29.769 0-54.162 27.544-58.266 63.236h-0.867v240.027h0.29v65.898c-0.059 1.211-0.29 2.309-0.29 3.466V899.12h0.867c4.104 35.724 28.497 63.237 58.266 63.237h208.206c29.768 0 54.162-27.514 58.266-63.237h0.578v-5.432h0.289V370.107h-0.289v-60.29c0.058-1.098 0.288-2.079 0.288-3.177zM431.42 179.355h161.732v411.096H431.42V179.355z m125.028 676.413c-27.282 15.723-60.981 15.723-88.324 0-27.397-15.837-44.22-44.97-44.22-76.586 0-31.563 16.823-60.753 44.22-76.534 27.343-15.778 61.042-15.778 88.324 0 27.399 15.781 44.22 44.972 44.22 76.534 0 31.616-16.82 60.749-44.22 76.586z" p-id="2923"></path><path d="M532.862 743.516c-12.717-7.399-28.438-7.399-41.212 0a41.17 41.17 0 0 0-20.578 35.666c0 22.773 18.438 41.211 41.214 41.211 22.771 0 41.215-18.438 41.215-41.211a41.096 41.096 0 0 0-20.639-35.666zM863.15 743.516a41.038 41.038 0 0 0-41.215 0c-12.772 7.34-20.577 20.924-20.577 35.666 0 14.737 7.805 28.322 20.577 35.662a41.038 41.038 0 0 0 41.215 0 41.102 41.102 0 0 0 20.637-35.662 41.098 41.098 0 0 0-20.637-35.666z" p-id="2924"></path><path d="M1005.751 306.64V144.934c0-1.067-0.231-2.079-0.231-3.15v-7.312h-0.577c-4.163-35.692-28.499-63.236-58.266-63.236H738.411c-29.769 0-54.102 27.544-58.208 63.236h-0.865v240.027h0.287v65.898c-0.057 1.211-0.287 2.309-0.287 3.466V899.12h0.865c4.106 35.724 28.439 63.237 58.208 63.237h208.266c29.767 0 54.103-27.514 58.266-63.237h0.577v-5.432h0.231V370.107h-0.231v-60.29c0-1.098 0.231-2.079 0.231-3.177zM761.705 179.355h161.734v411.096H761.705V179.355z m125.03 676.413c-27.343 15.723-61.041 15.723-88.382 0a88.447 88.447 0 0 1-44.161-76.586c0-31.563 16.82-60.753 44.161-76.534 27.341-15.778 61.039-15.778 88.382 0 27.341 15.781 44.22 44.972 44.22 76.534 0 31.616-16.879 60.749-44.22 76.586z" p-id="2925"></path><path d="M182.75 738.197c-22.659 0-40.982 18.382-40.982 40.984 0 22.599 18.324 40.98 40.982 40.98 22.602 0 40.925-18.382 40.925-40.98 0-22.602-18.323-40.984-40.925-40.984z" p-id="2926"></path><path d="M345.929 306.64V144.934c0-1.067-0.232-2.079-0.289-3.15v-7.312h-0.578c-4.104-35.692-28.439-63.236-58.208-63.236H78.59c-29.769 0-54.104 27.544-58.266 63.236h-0.809v240.027h0.23v65.898c0 1.211-0.23 2.309-0.23 3.466V899.12h0.809c4.163 35.724 28.498 63.237 58.266 63.237h208.264c29.769 0 54.104-27.514 58.208-63.237h0.578v-5.432h0.289V370.107h-0.289v-60.29c0.057-1.098 0.289-2.079 0.289-3.177zM101.826 179.355h161.733v411.096H101.826V179.355z m80.924 688.206c-48.843 0-88.381-39.537-88.381-88.379 0-48.787 39.538-88.383 88.381-88.383 48.786 0 88.323 39.596 88.323 88.383 0 48.841-39.536 88.379-88.323 88.379z" p-id="2927"></path>
                    </svg>
                </div>
                <div class="menuTitle">
                    健康档案
                </div>
            </div>
            <div class="flex1" @click="goUrl('personalCenter')">
                <div style="text-align:center;">
                    <svg viewBox="0 0 1024 1024" class="svgIcon" style="margin-top:10px;height:30px;fill:#3F51B5;">
                        <path d="M792.494137 223.561929l-265.614739 0c-11.032275 0-3.704372 25.738223-3.704372 36.84213 0 11.09265 0.039909 4.007271 11.143816 4.007271l259.42066 0L792.494137 223.561929zM174.482068 499.712639l0 61.963299 295.260972 0 0-61.963299c0-48.400385-39.200853-87.599191-87.600215-87.599191l-120.069753 0C213.672688 412.112424 174.482068 451.312254 174.482068 499.712639zM546.523827 615.845728l-416.798148 0L129.72568 140.829586l747.33252 0-0.061398 286.313174c26.892514 6.983048 37.469417 21.437263 59.037664 42.307614 0.566912 0.576122 1.073449 1.143034 1.649571 1.721203L937.684036 149.999442c-0.070608-40.586411-32.985285-73.581929-73.511321-73.581929l-732.828163 0c-40.587434 0-64.605478 32.92491-64.605478 73.521554l0 468.06277c0 40.596644 24.018044 61.042322 64.605478 61.042322l410.58258 0L546.523827 615.845728zM426.10001 277.953777c0-57.711457-46.811189-104.523669-104.523669-104.523669-57.722714 0-104.533903 46.811189-104.533903 104.523669 0 57.731923 46.811189 104.532879 104.533903 104.532879C379.288821 382.486657 426.10001 335.746076 426.10001 277.953777zM924.658358 534.217535c-45.293624-43.836435-108.784721-46.244277-150.838554-5.526882l-29.624744 28.674092c-11.406806 11.032275-11.468204 29.048622-0.183172 40.150482 11.356664 11.164282 29.807916 11.22568 41.16458 0.132007l29.624744-28.674092c21.751418-21.062733 50.29248-12.368714 68.885972 5.647633 9.888218 9.575086 15.343468 22.31833 15.343468 35.839289 0 13.501515-5.455251 26.254993-15.343468 35.830079l-93.431019 90.324258c-42.692377 41.355938-62.732826 21.95301-71.30507 13.633522-11.417039-11.032275-29.868291-10.961667-41.16458 0.130983-11.345407 11.103907-11.285032 29.11923 0.132007 40.151505 19.594287 18.966999 41.983225 28.420311 65.465056 28.420311 28.724234 0 59.047897-14.078661 87.904137-42.054857l93.369621-90.323235c20.992124-20.303439 32.600521-47.389357 32.600521-76.183176C957.259903 581.594612 945.650483 554.570092 924.658358 534.217535zM700.68199 863.354069c-11.345407-11.042508-29.806893-11.103907-41.223931-0.070608l-23.78473 23.025436c-20.607361 19.919698-54.169791 19.919698-74.777152 0-9.898451-9.574062-15.353702-22.32754-15.353702-35.839289 0-13.573147 5.455251-26.264203 15.353702-35.839289l87.529606-84.675603c18.13812-17.570185 52.256207-43.38004 77.124619-19.351763 11.417039 11.103907 29.878524 10.98111 41.235188-0.12075 11.34643-11.093674 11.224657-29.108997-0.132007-40.151505-42.307614-40.910799-104.785636-33.360839-159.209207 19.281155l-87.529606 84.685836c-20.992124 20.354604-32.540146 47.378101-32.540146 76.172943s11.548022 45.486006 32.600521 65.779211c21.629645 20.940959 49.989581 31.335714 78.399659 31.335714 28.420311 0 56.831413-10.394755 78.400683-31.397112l23.78473-23.016226C711.978279 882.128687 712.048887 874.44672 700.68199 863.354069zM792.494137 325.696176l-265.614739 0c-11.032275 0-3.704372 25.738223-3.704372 36.84213 0 11.09265 0.039909 3.997038 11.143816 3.997038l259.42066 0L792.494137 325.696176zM523.174003 468.862996c0 11.102883 0.039909 4.007271 11.143816 4.007271l259.42066 0-1.244342-40.839168-265.614739 0C515.8461 432.031099 523.174003 457.770345 523.174003 468.862996z" p-id="3595"></path>
                    </svg>
                </div>
                <div class="menuTitle">
                    {{handleUser.hzxm?handleUser.hzxm:'绑定人员'}}
                </div>
            </div>
        </div>
        <div>
            <div class="line1"></div>
            <div class="title1 paddingL5">
                <span>中心动态</span>
            </div>
            <div class="flex marginT5 borderB" v-for="item in newsList" @click="goArticle(item.id)">
                <div class="infoImg">
                    <img class="simg" :src="item.zst">
                </div>
                <div class="flex1 marginL20">
                    <div class="infoTitle">{{item.wzbt}}</div>
                    <div class="infoContent">{{item.wzjj}}</div>
                </div>
            </div>
        </div>
        <div class="line1"></div>
        <div class="flex">
            <div class="flex1">
                <div class="title1 paddingL5">
                    <span>特色科室</span>
                </div>
                <div class="marginT5 borderB">
                    <div class="dpTitle" v-for="item in departmentList" @click="loadDepartment(item.id)">&nbsp;&nbsp;&nbsp;&nbsp;{{item.mc}}</div>
                </div>
            </div>
            <div class="flex1">
                <div class="title1 paddingL5">
                    <span>医务人员</span>
                </div>
                <div class="marginT5 borderB">
                    <div class="dpTitle" v-for="item in personList" @click="loadPerson(item.id)">&nbsp;&nbsp;&nbsp;&nbsp;{{item.xm}}</div>
                </div>
            </div>
        </div>
    </div>
</template>
<script type="text/javascript">
export default {
    data() {
            return {
                info: {},
                items: [],
                adList:[],
                newsList:[],
                departmentList:[],
                personList:[],

            }
        },
        methods: {
            loadPerson(id){
                let params = {
                    xgid:id,
                    lx:'3'
                }
                this.api.getIntro(params).then(
                    res=>{
                        console.log(res);
                        this.goArticle(res.data[0].id);
                    }, err=>{
                        console.log(err);
                    })
            },
            loadDepartment(id){
                let params = {
                    xgid:id,
                    lx:'2'
                }
                this.api.getIntro(params).then(
                    res=>{
                        console.log(res);
                        this.goArticle(res.data[0].id);
                    }, err=>{
                        console.log(err);
                    })
            },
            loadIntro(){
                let params = {
                    xgid:this.info.id,
                    lx:'1'
                }
                this.api.getIntro(params).then(
                    res=>{
                        
                        console.log(res);
                        this.goArticle(res.data[0].id);
                    }, err=>{
                        console.log(err);
                    })
            },
            loadNotice(){
                let params = {
                    xgid:this.info.id,
                    wzlx:'3'
                }
                this.api.getArticleList(params).then(
                    res=>{
                        console.log(res);
                        if(res.data.length){
                            this.goArticle(res.data[0].id);
                        }else{
                            this.$messagebox('暂无。')
                        }

                    }, err=>{
                        console.log(err);
                    })
            },
            goAppointment(){
                this.$router.push({
                    path:'/index/appointment',
                    query:{jgid:this.info.id}
                })
            },
            loadAdList(){
                let params = {
                    xgid:this.info.id,
                    wzlx:'2',
                    length:'5',
                }
                this.api.getArticleList(params).then(
                    res=>{
                        console.log(res);
                        this.adList = res.data;
                    }, err=>{
                        console.log(err);
                    })
            },
            loadNewsList(){
                let params = {
                    xgid:this.info.id,
                    wzlx:'1',
                    length:'3',
                }
                this.api.getArticleList(params).then(
                    res=>{
                        console.log(res);
                        this.newsList = res.data;
                    }, err=>{
                        console.log(err);
                    })
            },
            loadDepartmentList(){
                let params = {
                    jgid:this.info.id,
                }
                this.api.getDepartmentList(params)
                    .then(
                            res=>{
                                this.departmentList = res.data;
                            }
                        )
            },
            loadPersonList(){
                let params = {
                    jgid:this.info.id,
                }
                this.api.getPersonList(params)
                    .then(
                            res=>{
                                this.personList = res.data;
                            }
                        )
            }
        },
        components: {
        },
        mounted() {
            this.info = this.$route.query;
            this.$store.commit('setPageTitle',this.info.text);
            this.loadAdList();
            this.loadNewsList();
            this.loadDepartmentList();
            this.loadPersonList();
        },
        computed:{
            handleUser() {
                return this.$store.getters.getHandleUser;
            },
        }
}
</script>
<style scoped>
.dpTitle{
    line-height: 18px;
    font-size: 14px;
    color:#7F7F7F;
}
.infoTitle{
    font-size: 14px;
    line-height: 14px;
}
.menuTitle{
    font-size: 12px;
    text-align: center;
    height: 14px;
    line-height: 12px;
}
.iconbox2{
    width:40px;
    text-align: center;
}
.text2{
    height:50px;
    line-height:50px;
    font-size:14px;
    color:#808080;
    margin-left: 10px;
}
.borderB{
    /*border-bottom: 1px solid #CCCCCC*/
}
.marginT5{
    margin-top: 5px;
}
.marginL10{
    margin-left: 10px;
}
.infoContent{
    color:#4C4C4C;
    font-size:10px;
    line-height: 13px;
    overflow : hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}
.infoImg{
    width:50px;
    padding:5px;
}
.img{
    width:100%;
}
.simg {
    width: 50px;
    height:30px;
}

.mint-swipe {
    width: 100%;
    height: 150px;
}
</style>
